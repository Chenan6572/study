define(function(require){
	var $ = require("jquery");
	var justep = require("$UI/system/lib/justep");

	var Model = function(){
		this.callParent();
	};

	Model.prototype.modelUnLoad = function(event){

	};
	Model.prototype.onload = function(event){
		var loginName = localStorage.getItem("loginName");
		console.log(loginName);
		var name = document.getElementById("name").value;
		var idcard = document.getElementById("idcard").value;
		// console.log("Token = "+localStorage.getItem('Token'));
		$.ajax({
			headers:{
				Authorization: "Bearer " + localStorage.getItem('Token'),
			},
			url: 'http://10.10.1.232:8088/YProject/api/query_matter',
			processData: false,
			cache: false,
			async: true,
			global: false,
			contentType: "application/json; charset=utf-8",
			datatype: "json",
			type: 'get',
			success: function (res) {
				if (res.state==="200"){	
					justep.Util.hint(res.message, {
						type: 'success'	
					});	
					justep.Shell.showPage("main");				
				}else{
					justep.Util.hint(res.message, {
					type: 'danger'	
				});				
				}	
			},
			error: function (res) {
				justep.Util.hint(res.message, {
					type: 'danger'
				});
			}
		});
		return;
	};

	Model.prototype.showDetail = function(event)
	{
		justep.Shell.showPage("matterdetail");
	}
	return Model;
});