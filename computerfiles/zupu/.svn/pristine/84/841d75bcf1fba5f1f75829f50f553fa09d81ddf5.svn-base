define(function (require) {
	var $ = require("jquery");
	var justep = require("$UI/system/lib/justep");
	var zeducationInfoList = new Array();
	var zworkExperienceList = new Array();

	var Model = function () {
		this.callParent();
	};

	console.log("进入个人信息页");
	//访问后台数据
	var loginName = localStorage.getItem("loginName");
	$.ajax({
		headers: {
			Authorization: "Bearer " + localStorage.getItem('Token'),
		},
		url: 'http://10.10.1.232:8088/YProject/api/query?login_name=' + loginName,
		processData: false,
		cache: false,
		async: true,
		global: false,
		contentType: "application/json; charset=utf-8",
		datatype: "json",
		type: 'post',
		success: function (res) {
			//打印数据
			console.log(res.data);

			//測試
			$("#name").val(3333);

			/*$("#name").html(res.data.name);*/
			$("#doornum").html(res.data.doornum);
			$("#birthday").html(res.data.birthday);
			$("#address").html(res.data.address);
			$("#phone").html(res.data.phone);
			$("#register_category").html(res.data.register_category);

			zeducationInfoList = res.data.zEducationInfoList; //教育信息list
			zworkExperienceList = res.data.zWorkExperienceList; //工作经历list
			//渲染教育信息至页面
			// console.log("test_one"+$("#education").html());
			// var test = document.getElementById("education").innerHTML();
			// console.log("test_two = "+test);
			console.log("test_one" + zeducationInfoList.length);
			var link = "";
			//工作list
			for (var i = 0; i < zworkExperienceList.length; i++) {
				
			}
			for (var i = 0; i < zeducationInfoList.length; i++) {

				link += '<div class="list cI3iyuu" __cid="cI3iyuu" id="education">' +
					'<div class="item cI3iyuu" __cid="cI3iyuu" >' +
					'<div class="media_left cI3iyuu" __cid="cI3iyuu">' +
					'<span class="basic cI3iyuu" __cid="cI3iyuu">教育信息</span>' +
					'<div class="media_head cI3iyuu" __cid="cI3iyuu">' +
					'<img src="$UI/zupu/img/edu.png" alt="" xid="tou" class="head cI3iyuu" __cid="cI3iyuu"/>' +
					'</div>' +
					'</div>' +
					'<div xid="cont" title="neirong" class="media_cont cI3iyuu" __cid="cI3iyuu">' +
					'<span id="name" />' + zeducationInfoList[i].school_name +
					'<br />' +
					'<span id="birthday" />' + zeducationInfoList[i].school_start_data +
					'<br />' +
					'<span id="nowaddress" />' + zeducationInfoList[i].related_major +
					'<span />|' +
					'<span id="" />' + zeducationInfoList[i].education +
					'</div>' +
					'<div class="media_edit cI3iyuu" __cid="cI3iyuu" bind-click="div4Click">' +
					'<img src="$UI/zupu/img/edit.png" alt="" xid="link" />' +
					'</div>' +
					'</div>' +
					'</div>'

				// link+='<div class="list" id="education">' +
				// 	'<div class="item cI3iyuu" >' +
				// 	'<div class="media_left">' +
				// 	'<span class="basic">教育信息</span>' +
				// 	'<div class="media_head">' +
				// 	'<img src="$UI/zupu/img/edu.png" alt="" xid="tou" class="head"/>' +
				// 	'</div>' +
				// 	'</div>' +
				// 	'<div xid="cont" title="neirong" class="media_cont">' +
				// 	'<span id="name" />' + zeducationInfoList[i].school_name +
				// 	'<br />' +
				// 	'<span id="birthday" />' + zeducationInfoList[i].school_start_data +
				// 	'<br />' +
				// 	'<span id="nowaddress" />' + zeducationInfoList[i].related_major +
				// 	'<span />|' +
				// 	'<span id="" />' + zeducationInfoList[i].education +
				// 	'</div>' +
				// 	'<div class="media_edit" bind-click="div4Click">' +
				// 	'<img src="$UI/zupu/img/edit.png" alt="" xid="link" />' +
				// 	'</div>' +
				// 	'</div>' +
				// 	'</div>'

			}
			document.getElementById("education").innerHTML = link;

			//渲染工作经历信息至页面
			for (var i = 0; i < zeducationInfoList.length; i++) {

			}

			// var arr=res.data.zEducationInfoList;
			// for(var i=0;i<res.data.zEducationInfoList.length;i++){	
			// 	for(var j=0;j<=)				
			//    var school_name=arr[i].school_name; //学校
			//    var related_major=arr[i].related_major;//专业
			//    var education=arr[i].education;//学历
			//    var school_start_data=arr[i].school_start_data;//入校时间
			//    var school_end_data=arr[i].school_end_data;//毕业时间
			//}

			// localStorage.setItem("eductionList", school_name);
		},
		error: function (res) {
			justep.Util.hint(res.message, {
				type: 'danger',
			});
			console.log("测试失败");
		}
	});

	//跳转个人信息页
	Model.prototype.div1Click = function (event) {
		justep.Shell.showPage("jibenxinxi");

	};
	// 绑定手机号界面
	Model.prototype.div2Click = function (event) {
		justep.Shell.showPage("bindphone");
	}; // 编辑户籍信息

	Model.prototype.div3Click = function (event) {
		justep.Shell.showPage("bindhuji");
	};
	// 编辑工作经历
	Model.prototype.div5Click = function (event) {
		justep.Shell.showPage("bindeditwork");
	};
	// 添加工作经历
	Model.prototype.sumwork = function (event) {
		justep.Shell.showPage("bindaddwork");
	};
	// 添加教育信息
	Model.prototype.sumedu = function (event) {
		justep.Shell.showPage("bindaddedu");
	};

	// 编辑教育信息
	Model.prototype.div4Click = function (event) {
		justep.Shell.showPage("bindeditedu");
	};

	return Model;
});